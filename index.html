<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>목박사 RPG 간소화판</title>
<style>
  body { background: #111; color: #eee; font-family: Arial, sans-serif; margin:0; padding:20px;}
  #stats { margin-bottom: 10px; }
  button { margin:5px; padding:8px 12px; font-size:14px; cursor:pointer; }
  #dialogue { white-space: pre-wrap; min-height: 50px; margin-bottom: 10px; }
</style>
</head>
<body>

<div id="stats"></div>
<div id="dialogue"></div>
<div id="choices"></div>

<script>
(() => {
  const player = { hp:100, atk:10, mp:30, crit:5, money:10000, turn:1 };
  let currentScript = [];
  let currentLine = 0;

  const statsDiv = document.getElementById('stats');
  const dialogueDiv = document.getElementById('dialogue');
  const choicesDiv = document.getElementById('choices');

  const scripts = {
    "start": [
      { speaker:"박사", text:"목박사 RPG에 오신 걸 환영합니다!" },
      { speaker:"박사", text:"준비가 되셨나요?" , choice:true, choices:[
        { text:"네! 시작해요", next:3 },
        { text:"아니요, 더 설명해줘요", next:1 }
      ]},
      { speaker:"박사", text:"조금 더 설명할게요. 이 게임은 텍스트 기반입니다.\n엔터키로 다음 대사를 넘기고, 선택지는 클릭하세요.", next:0 },
      { speaker:"박사", text:"좋아요, 이제 모험을 시작합니다!" }
    ]
  };

  function updateStats(){
    statsDiv.textContent = 
      `체력: ${player.hp} | 공격력: ${player.atk} | 마나: ${player.mp} | 치명타: ${player.crit}% | 돈: ${player.money}원 | 턴: ${player.turn}`;
  }

  function showLine(){
    const line = currentScript[currentLine];
    if(!line){
      dialogueDiv.textContent = "끝났습니다.";
      choicesDiv.innerHTML = "";
      return;
    }
    updateStats();
    dialogueDiv.textContent = (line.speaker ? line.speaker + ": " : "") + line.text;
    choicesDiv.innerHTML = "";

    if(line.choice){
      line.choices.forEach(choice=>{
        const btn = document.createElement('button');
        btn.textContent = choice.text;
        btn.onclick = () => {
          if(choice.next !== undefined){
            currentLine = choice.next;
            showLine();
          }
        };
        choicesDiv.appendChild(btn);
      });
    } else {
      document.onkeydown = (e) => {
        if(e.key === "Enter"){
          currentLine++;
          showLine();
        }
      };
    }
  }

  function start(){
    currentScript = scripts["start"];
    currentLine = 0;
    showLine();
  }

  start();
})();
</script>

</body>
</html>
