<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>목박사 스토리</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background-color: #111;
    color: white;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-end;
  }

  #dialogue-box {
    width: 90%;
    max-width: 800px;
    background-color: rgba(0, 0, 0, 0.85);
    border: 3px solid #555;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 30px;
    box-shadow: 0 0 15px #000;
  }

  #speaker {
    font-weight: bold;
    color: #ffdd57;
    margin-bottom: 10px;
    font-size: 1.2em;
  }

  #text {
    font-size: 1.1em;
    min-height: 60px;
    white-space: pre-line;
  }

  #hint {
    font-size: 0.9em;
    color: #aaa;
    margin-top: 10px;
    text-align: right;
  }
</style>
</head>
<body>

<div id="dialogue-box">
  <div id="speaker"></div>
  <div id="text"></div>
  <div id="hint">[엔터] 다음</div>
</div>

<script>
const dialogues = [
  { speaker: "박사", text: "드디어....드디어 인류 최고의 발명품을 만들었어요!" },
  { speaker: "조수", text: "그게 뭔데요 박사님?" },
  { speaker: "박사", text: "내 모모짱을 닮은 무드등" },
  { speaker: "조수", text: "아니 그걸 누가써요;;" },
  { speaker: "박사", text: "...아 그런가?" },
  { speaker: "조수", text: "하....저도이제 지겹다고요!! 언제까지 그렇게 하실거에요!!!" },
  { speaker: "박사", text: "내가 미안하다 광칠아..." },
  { speaker: "조수", text: "하...저도 이젠 더이상 못해요! 전 갈꺼에요" },
  { speaker: "박사", text: "아니 나에게 1개월, 아니 1주일만 시간을 주게!!!" },
  { speaker: "조수", text: "늦었어요, 이거나 받고 꺼지세요" },
  { speaker: null, text: "(만원 한장을 주고 작업실을 떠난 조수....)" },
  { speaker: "박사", text: "이젠 진짜 혼자가 됐어......." },
  { speaker: "박사", text: "안돼겠어! 나 목박사 꼭 우주최강 박사가 될 태다!!!" }
];

let currentIndex = 0;
const speakerEl = document.getElementById("speaker");
const textEl = document.getElementById("text");

let typingInterval;
let isTyping = false;

function typeText(fullText, callback) {
  let i = 0;
  isTyping = true;
  textEl.textContent = "";
  typingInterval = setInterval(() => {
    textEl.textContent += fullText[i];
    i++;
    if (i >= fullText.length) {
      clearInterval(typingInterval);
      isTyping = false;
      if (callback) callback();
    }
  }, 30); // 타자 속도 (ms)
}

function showDialogue() {
  if (isTyping) {
    // 타이핑 중이면 바로 끝까지 출력
    clearInterval(typingInterval);
    const line = dialogues[currentIndex - 1];
    textEl.textContent = line.text;
    isTyping = false;
    return;
  }

  if (currentIndex >= dialogues.length) {
    speakerEl.textContent = "";
    textEl.textContent = "스토리 종료.";
    return;
  }

  const line = dialogues[currentIndex];
  speakerEl.textContent = line.speaker || "";
  typeText(line.text);
  currentIndex++;
}

// 엔터 키로 대사 진행
document.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    showDialogue();
  }
});

// 첫 대사 표시
showDialogue();
</script>

</body>
</html>
